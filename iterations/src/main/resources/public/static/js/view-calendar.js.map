{"version":3,"sources":["webpack://plenum/./src/pages/view-calendar.js","webpack://plenum/webpack/bootstrap","webpack://plenum/webpack/runtime/compat get default export","webpack://plenum/webpack/runtime/define property getters","webpack://plenum/webpack/runtime/hasOwnProperty shorthand","webpack://plenum/webpack/runtime/make namespace object","webpack://plenum/webpack/runtime/runtimeId","webpack://plenum/webpack/runtime/jsonp chunk loading","webpack://plenum/webpack/startup"],"names":["useStyles","makeStyles","theme","root","display","details","flexDirection","content","flex","controls","margin","height","paddingLeft","spacing","paddingBottom","paddingTop","title","fontWeight","marginBottom","fab","alignItems","fabGreen","color","palette","common","white","backgroundColor","green","App","useState","paramId","parseInt","URLSearchParams","document","location","search","substring","get","isNaN","window","history","replaceState","id","setId","calendars","setCalendars","console","log","file","setFile","editable","setEditable","React","value","setValue","classes","useTheme","transitionDuration","enter","transitions","duration","enteringScreen","exit","leavingScreen","useEffect","fetch","method","mode","then","res","json","data","onpopstate","e","state","map","calendar","fabs","className","icon","label","clsx","handleChangeIndex","component","variant","onAvailChange","date","qHour","index","Z","key","in","timeout","style","transitionDelay","unmountOnExit","aria-label","onClick","ReactDOM","getElementById","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","__webpack_modules__","m","n","getter","__esModule","d","a","definition","o","Object","defineProperty","enumerable","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","j","installedChunks","125","deferredModules","checkDeferredModules","checkDeferredModulesImpl","result","i","length","deferredModule","fulfilled","depId","splice","s","x","chunkLoadingGlobal","slice","webpackJsonpCallback","chunkId","chunkIds","moreModules","runtime","executeModules","resolves","push","parentChunkLoadingFunction","shift","apply","self","bind"],"mappings":"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","file":"js/view-calendar.js","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport ReactDOM from 'react-dom';\nimport Calendar from \"../components/calendar\";\nimport Viewable_list from \"../components/viewable-list-item\";\nimport Header from \"../components/header\";\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DoneIcon from '@material-ui/icons/Done';\nimport Zoom from \"@material-ui/core/Zoom\";\nimport Fab from \"@material-ui/core/Fab\";\nimport { green } from '@material-ui/core/colors';\nimport clsx from \"clsx\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex',\n    },\n    details: {\n        display: 'flex',\n        flexDirection: 'column',\n    },\n    content: {\n        flex: '1 0 auto',\n    },\n    controls: {\n        margin: \"auto\",\n        height: 60,\n        paddingLeft: theme.spacing(1),\n        paddingBottom: theme.spacing(1),\n        paddingTop: theme.spacing(1),\n    },\n    title: {\n        fontWeight: \"bold\",\n        marginBottom: theme.spacing(4),\n    },\n    fab: {\n        display: 'flex',\n        alignItems: 'center',\n        paddingLeft: theme.spacing(1),\n        paddingBottom: theme.spacing(1),\n    },\n    fabGreen: {\n        color: theme.palette.common.white,\n        backgroundColor: green[500],\n        '&:hover': {\n            backgroundColor: green[600],\n        },\n    },\n}));\n\nconst App = () => {\n\n    let getInitId = () => {\n        let paramId = parseInt(new URLSearchParams(document.location.search.substring(1)).get(\"id\"));\n        if(isNaN(paramId)) {\n            window.history.replaceState({id: -1},'','/view-calendar')\n            return -1;\n        }\n        else {\n            window.history.replaceState({id: paramId},'','/view-calendar?id=' + paramId)\n            return paramId;\n        }\n    }\n\n    const [id, setId] = useState(getInitId)\n\n    const [calendars, setCalendars] = useState([])\n\n    console.log(calendars)\n\n    const [file, setFile] = useState({})\n\n    const [editable, setEditable] = useState(false)\n    const [value, setValue] = React.useState(0);\n\n    const classes = useStyles();\n    const theme = useTheme();\n    const transitionDuration = {\n        enter: theme.transitions.duration.enteringScreen,\n        exit: theme.transitions.duration.leavingScreen,\n    };\n\n    useEffect(() => {\n        fetch('/api/calendar', {\n                method: 'GET',\n                mode: 'cors'\n            }\n        ).then(res => {\n            return res.json()\n        }).then(data => {\n            console.log(data)\n            setCalendars([...data])\n        })\n    }, [])\n\n    useEffect(() => {\n        if(id > 0) {\n            fetch('/api/calendar?id=' + id, {\n                    method: 'GET',\n                    mode: 'cors'\n                }\n            ).then(res => {\n                return res.json()\n            }).then(data => {\n                console.log(data)\n                setFile(data)\n            })\n        }\n        else {\n            setFile({})\n        }\n    }, [id, editable])\n\n    let updateActive = (id) => () => {\n        window.history.pushState({id: id},'','/view-calendar?id=' + id)\n        setId(id)\n    }\n\n    let clearCalendarView = () => {\n        window.history.pushState({id: -1},'','/view-calendar')\n        setId(-1)\n    }\n\n    window.onpopstate = (e) => {\n        setId(e.state.id)\n    }\n\n    let onAvailChange = (date, qHour, state) => () => {\n        fetch('/api/updateavailability?calendarId=' + id + \"&date=\" + date + \"&qHour=\" + qHour + \"&state=\" + (state ? 1 : 0), {\n            method: 'POST',\n            mode: 'cors'\n        }).then(res => undefined)\n    }\n\n    let calendarNames = calendars.map(calendar => {return {id: calendar.id, content: calendar.title}})\n\n    const fabs = [\n        {\n            color: 'primary',\n            className: classes.fab,\n            icon: <EditIcon className={classes.icon}/>,\n            label: 'Edit Calendar',\n        },\n        {\n            color: 'inherit',\n            className: clsx(classes.fab, classes.fabGreen),\n            icon: <DoneIcon className={classes.icon}/>,\n            label: 'Save Edits',\n        },\n    ];\n\n    const handleChangeIndex = () => {\n        editable ? setValue(0) : setValue(1);\n        setEditable(!editable);\n    };\n\n\n    return (\n        <div>\n            <Header></Header>\n            <Card className={classes.root}>\n                <div className={classes.details}>\n                    <CardContent className={classes.content}>\n                        <Typography component=\"h4\" variant=\"h4\" className={classes.title}>\n                            Calendar: {id}\n                        </Typography>\n                        {/*<Typography variant=\"subtitle1\" color=\"textSecondary\">*/}\n                        {/*    description*/}\n                        {/*</Typography>*/}\n                    </CardContent>\n                    <Card>\n                        <Calendar editable={editable} onAvailChange={onAvailChange} file={file}/>\n                    </Card>\n                    <div className={classes.controls}>\n                        {fabs.map((fab, index) => (\n                            <Zoom\n                                key={fab.color}\n                                in={value === index}\n                                timeout={transitionDuration}\n                                style={{\n                                    transitionDelay: `${value === index ? transitionDuration.exit : 0}ms`,\n                                }}\n                                unmountOnExit\n                            >\n                                <Fab aria-label={fab.label} className={fab.className} color={fab.color} onClick={handleChangeIndex}>\n                                    {fab.icon}\n                                </Fab>\n                            </Zoom>\n                        ))}\n                    </div>\n                </div>\n            </Card>\n        </div>\n    )\n};\n\nReactDOM.render(<App />, document.getElementById('root'))","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.j = 125;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// Promise = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t125: 0\n};\n\nvar deferredModules = [\n\t[440,851,638,643,715,749,434,471,35,779,878,106,617,783,685]\n];\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\nvar checkDeferredModules = () => {\n\n};\nfunction checkDeferredModulesImpl() {\n\tvar result;\n\tfor(var i = 0; i < deferredModules.length; i++) {\n\t\tvar deferredModule = deferredModules[i];\n\t\tvar fulfilled = true;\n\t\tfor(var j = 1; j < deferredModule.length; j++) {\n\t\t\tvar depId = deferredModule[j];\n\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferredModules.splice(i--, 1);\n\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n\t\t}\n\t}\n\tif(deferredModules.length === 0) {\n\t\t__webpack_require__.x();\n\t\t__webpack_require__.x = () => {\n\n\t\t}\n\t}\n\treturn result;\n}\n__webpack_require__.x = () => {\n\t// reset startup function so it can be called again when more startup code is added\n\t__webpack_require__.x = () => {\n\n\t}\n\tchunkLoadingGlobal = chunkLoadingGlobal.slice();\n\tfor(var i = 0; i < chunkLoadingGlobal.length; i++) webpackJsonpCallback(chunkLoadingGlobal[i]);\n\treturn (checkDeferredModules = checkDeferredModulesImpl)();\n};\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (data) => {\n\tvar [chunkIds, moreModules, runtime, executeModules] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0, resolves = [];\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tresolves.push(installedChunks[chunkId][0]);\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tparentChunkLoadingFunction(data);\n\twhile(resolves.length) {\n\t\tresolves.shift()();\n\t}\n\n\t// add entry modules from loaded chunk to deferred list\n\tif(executeModules) deferredModules.push.apply(deferredModules, executeModules);\n\n\t// run deferred modules when all chunks ready\n\treturn checkDeferredModules();\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkplenum\"] = self[\"webpackChunkplenum\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = webpackJsonpCallback;","// run startup\nreturn __webpack_require__.x();\n"],"sourceRoot":""}